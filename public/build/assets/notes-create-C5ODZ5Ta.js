document.addEventListener("DOMContentLoaded",function(){console.log("Notes create script loaded");const i=Quill.import("formats/font"),r=Quill.import("formats/size"),l=["sans-serif","serif","roboto","opensans","montserrat","raleway","georgia","verdana","spectral","merriweather"],s=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","28px","36px","48px","72px"];i.whitelist=l,i.default="sans-serif",r.whitelist=s,Quill.register(i,!0),Quill.register(r,!0);const o=new Quill("#editor",{theme:"snow",placeholder:"Введите текст заметки...",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{size:s}],[{font:l}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],[{align:[]}],["link"],["clean"]]}});console.log("Quill initialized"),delete o.keyboard.bindings.Enter,o.keyboard.addBinding({key:"Enter",handler:function(t,n){const e=o.getFormat(t.index);return this.quill.insertText(t.index,`
`),this.quill.setSelection(t.index+1),(e.font||e.size)&&setTimeout(()=>{this.quill.getSelection()&&(e.font&&this.quill.format("font",e.font),e.size&&this.quill.format("size",e.size))},0),!1}});const u=document.getElementById("note-form");if(!u){console.error("Note form not found");return}u.addEventListener("submit",function(t){t.preventDefault(),console.log("Submit event triggered");const n=document.querySelector("#content");if(!n){console.error("Content input not found");return}const e=o.root.innerHTML.trim();n.value=e,(e===""||e==="<p><br></p>")&&(n.value="<p>Пустая заметка</p>"),console.log("Content input set:",n.value.substring(0,50)+"..."),this.submit()})});
